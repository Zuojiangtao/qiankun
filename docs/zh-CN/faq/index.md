# å¸¸è§é—®é¢˜

æœ¬ FAQ æ¶µç›–äº†ä½¿ç”¨ qiankun æ—¶é‡åˆ°çš„æœ€å¸¸è§é—®é¢˜å’Œé—®é¢˜ã€‚å¦‚æœæ‚¨æ‰¾ä¸åˆ°æ‰€éœ€çš„ç­”æ¡ˆï¼Œè¯·æŸ¥çœ‹æˆ‘ä»¬çš„ [GitHub Issues](https://github.com/umijs/qiankun/issues) æˆ–åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºè®¨è®ºã€‚

## ğŸš€ å…¥é—¨æŒ‡å—

### é—®ï¼šä»€ä¹ˆæ˜¯ qiankunï¼Œä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨å®ƒï¼Ÿ

**ç­”ï¼š** qiankun æ˜¯ä¸€ä¸ªåŸºäº single-spa çš„å¾®å‰ç«¯æ¡†æ¶ï¼Œé€šè¿‡ç»„åˆå¤šä¸ªè¾ƒå°çš„ç‹¬ç«‹åº”ç”¨æ¥æ„å»ºå¤§è§„æ¨¡å‰ç«¯åº”ç”¨ã€‚åœ¨ä»¥ä¸‹æƒ…å†µä¸‹åº”è¯¥è€ƒè™‘ä½¿ç”¨ qiankunï¼š

- å›¢é˜Ÿåœ¨ä¸æ–­å£®å¤§ï¼Œéœ€è¦è·¨å¤šä¸ªå›¢é˜Ÿæ‰©å±•å¼€å‘
- æœ‰éœ€è¦ä¸æ–°åŠŸèƒ½å…±å­˜çš„é—ç•™åº”ç”¨
- å¸Œæœ›åœ¨ä¸€ä¸ªåº”ç”¨ä¸­ä½¿ç”¨ä¸åŒçš„æ¡†æ¶ï¼ˆReactã€Vueã€Angularï¼‰
- éœ€è¦ä¸ºåº”ç”¨çš„ä¸åŒéƒ¨åˆ†æä¾›ç‹¬ç«‹éƒ¨ç½²èƒ½åŠ›

### é—®ï¼šqiankun ä¸å…¶ä»–å¾®å‰ç«¯è§£å†³æ–¹æ¡ˆæœ‰ä½•ä¸åŒï¼Ÿ

**ç­”ï¼š** qiankun æä¾›äº†å‡ ä¸ªå…³é”®ä¼˜åŠ¿ï¼š

- **ç”Ÿäº§å°±ç»ª**ï¼šç”±èš‚èšé›†å›¢åœ¨å¤§è§„æ¨¡åº”ç”¨ä¸­æ„å»ºå’Œæµ‹è¯•
- **æ¡†æ¶æ— å…³**ï¼šé€‚ç”¨äº Reactã€Vueã€Angular å’ŒåŸç”Ÿ JavaScript
- **å¼ºå¤§çš„æ²™ç®±**ï¼šå¼€ç®±å³ç”¨çš„ JavaScript å’Œ CSS éš”ç¦»
- **HTML å…¥å£**ï¼šä½¿ç”¨ HTML æ–‡ä»¶ä½œä¸ºå…¥å£ç‚¹çš„ç®€å•é…ç½®
- **ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ**ï¼šUI ç»‘å®šã€CLI å·¥å…·å’Œ webpack æ’ä»¶

### é—®ï¼šæˆ‘å¯ä»¥åœ¨ç°æœ‰åº”ç”¨ä¸­ä½¿ç”¨ qiankun å—ï¼Ÿ

**ç­”ï¼š** å¯ä»¥ï¼qiankun æ—¨åœ¨ä¸ç°æœ‰åº”ç”¨ä¸€èµ·å·¥ä½œã€‚æ‚¨å¯ä»¥ï¼š

1. **åŒ…è£…ç°æœ‰åº”ç”¨**ï¼šå°†å½“å‰åº”ç”¨è½¬æ¢ä¸º qiankun ä¸»åº”ç”¨
2. **å¢é‡è¿ç§»**ï¼šé€æ­¥å°†åŠŸèƒ½æå–åˆ°å¾®åº”ç”¨ä¸­
3. **é—ç•™é›†æˆ**ï¼šåœ¨æ–°å¾®åº”ç”¨æ—è¾¹è¿è¡Œé—ç•™åº”ç”¨
4. **æ¡†æ¶è¿ç§»**ï¼šé€æ­¥ä»ä¸€ä¸ªæ¡†æ¶è¿ç§»åˆ°å¦ä¸€ä¸ªæ¡†æ¶

## ğŸ”§ å®‰è£…å’Œè®¾ç½®

### é—®ï¼šåŠ è½½å¾®åº”ç”¨æ—¶é‡åˆ° CORS é”™è¯¯ï¼Œå¦‚ä½•ä¿®å¤ï¼Ÿ

**ç­”ï¼š** CORS é”™è¯¯åœ¨å¼€å‘ä¸­å¾ˆå¸¸è§ã€‚ä»¥ä¸‹æ˜¯è§£å†³æ–¹æ¡ˆï¼š

**å¯¹äº webpack dev serverï¼š**
```javascript
// webpack.config.js æˆ– vue.config.js
module.exports = {
  devServer: {
    headers: {
      'Access-Control-Allow-Origin': '*',
      'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, PATCH, OPTIONS',
      'Access-Control-Allow-Headers': 'X-Requested-With, content-type, Authorization'
    }
  }
};
```

**å¯¹äº Create React Appï¼ˆä½¿ç”¨ CRACOï¼‰ï¼š**
```javascript
// craco.config.js
module.exports = {
  devServer: {
    headers: {
      'Access-Control-Allow-Origin': '*'
    }
  }
};
```

**å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œé…ç½®æ‚¨çš„æœåŠ¡å™¨ï¼š**
```nginx
# nginx.conf
location / {
    add_header Access-Control-Allow-Origin *;
    add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';
    add_header Access-Control-Allow-Headers 'DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range';
}
```

### é—®ï¼šæˆ‘çš„å¾®åº”ç”¨æ— æ³•åŠ è½½ï¼Œåº”è¯¥æ£€æŸ¥ä»€ä¹ˆï¼Ÿ

**ç­”ï¼š** æŒ‰ç…§æ­¤æ•…éšœæ’é™¤æ¸…å•ï¼š

1. **æ£€æŸ¥ç½‘ç»œé€‰é¡¹å¡**ï¼šå¾®åº”ç”¨èµ„æºæ˜¯å¦æœ‰ 404 é”™è¯¯ï¼Ÿ
2. **éªŒè¯ CORS**ï¼šæ§åˆ¶å°ä¸­æ˜¯å¦æœ‰ CORS é”™è¯¯ï¼Ÿ
3. **æ£€æŸ¥å…¥å£ç‚¹**ï¼šHTML å…¥å£æ–‡ä»¶æ˜¯å¦å¯è®¿é—®ï¼Ÿ
4. **éªŒè¯å¯¼å‡º**ï¼šå¾®åº”ç”¨æ˜¯å¦å¯¼å‡ºäº†å¿…éœ€çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Ÿ
5. **æ£€æŸ¥å®¹å™¨**ï¼šDOM ä¸­æ˜¯å¦å­˜åœ¨å®¹å™¨å…ƒç´ ï¼Ÿ

**æ­£ç¡®çš„å¾®åº”ç”¨å¯¼å‡ºç¤ºä¾‹ï¼š**
```javascript
// å¾®åº”ç”¨å…¥å£æ–‡ä»¶
export async function bootstrap() {
  console.log('micro app bootstrapped');
}

export async function mount(props) {
  console.log('micro app mounted', props);
  // æ‚¨çš„åº”ç”¨æŒ‚è½½é€»è¾‘
}

export async function unmount(props) {
  console.log('micro app unmounted', props);
  // æ‚¨çš„åº”ç”¨æ¸…ç†é€»è¾‘
}
```

### é—®ï¼šå¦‚ä½•å¤„ç†å¾®åº”ç”¨çš„ä¸åŒåŸºç¡€è·¯å¾„ï¼Ÿ

**ç­”ï¼š** åœ¨å¾®åº”ç”¨ä¸­é…ç½®å…¬å…±è·¯å¾„ï¼š

**å¯¹äº webpackï¼š**
```javascript
// webpack.config.js
module.exports = {
  output: {
    publicPath: process.env.NODE_ENV === 'production' 
      ? 'https://mycdn.com/micro-app/' 
      : 'http://localhost:8080/'
  }
};
```

**å¯¹äºè¿è¡Œæ—¶é…ç½®ï¼š**
```javascript
// å¾®åº”ç”¨ä¸­çš„ public-path.js
if (window.__POWERED_BY_QIANKUN__) {
  __webpack_public_path__ = window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__;
}
```

## ğŸ—ï¸ æ¶æ„å’Œè®¾è®¡

### é—®ï¼šæˆ‘åº”è¯¥å¦‚ä½•æ„å»ºå¾®å‰ç«¯æ¶æ„ï¼Ÿ

**ç­”ï¼š** éµå¾ªä»¥ä¸‹æ¶æ„åŸåˆ™ï¼š

**1. é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼š**
```
ä¸»åº”ç”¨ï¼ˆShellï¼‰
â”œâ”€â”€ ç”¨æˆ·ç®¡ç†ï¼ˆHR é¢†åŸŸï¼‰
â”œâ”€â”€ äº§å“ç›®å½•ï¼ˆå•†åŠ¡é¢†åŸŸï¼‰
â”œâ”€â”€ åˆ†æä»ªè¡¨æ¿ï¼ˆBI é¢†åŸŸï¼‰
â””â”€â”€ è®¾ç½®ï¼ˆç³»ç»Ÿé¢†åŸŸï¼‰
```

**2. å…±äº«ä¸ç‹¬ç«‹ï¼š**
- **å…±äº«**ï¼šèº«ä»½éªŒè¯ã€å¯¼èˆªã€è®¾è®¡ç³»ç»Ÿ
- **ç‹¬ç«‹**ï¼šä¸šåŠ¡é€»è¾‘ã€æ•°æ®è·å–ã€å†…éƒ¨çŠ¶æ€

**3. é€šä¿¡æ¨¡å¼ï¼š**
```javascript
// äº‹ä»¶é©±åŠ¨é€šä¿¡
window.dispatchEvent(new CustomEvent('user-updated', { 
  detail: { userId: 123 } 
}));

// åŸºäºå±æ€§çš„é€šä¿¡
registerMicroApps([{
  name: 'user-app',
  entry: '//localhost:8080',
  container: '#container',
  activeRule: '/users',
  props: { 
    userPermissions: currentUser.permissions,
    onUserUpdate: handleUserUpdate
  }
}]);
```

### é—®ï¼šå¦‚ä½•åœ¨å¾®åº”ç”¨ä¹‹é—´å…±äº«ä¾èµ–ï¼Ÿ

**ç­”ï¼š** å‡ ç§æ–¹æ³•æ•ˆæœå¾ˆå¥½ï¼š

**1. å¤–éƒ¨ä¾èµ–ï¼ˆæ¨èï¼‰ï¼š**
```javascript
// webpack.config.js
module.exports = {
  externals: {
    'react': 'React',
    'react-dom': 'ReactDOM',
    'lodash': '_'
  }
};
```

**2. æ¨¡å—è”é‚¦ï¼š**
```javascript
// ä¸»åº”ç”¨ webpack é…ç½®
new ModuleFederationPlugin({
  name: 'shell',
  shared: {
    react: { singleton: true },
    'react-dom': { singleton: true }
  }
});
```

**3. CDN æ–¹æ³•ï¼š**
```html
<!-- ä» CDN åŠ è½½å…±äº«åº“ -->
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
```

### é—®ï¼šå¾®åº”ç”¨å¯ä»¥ç›¸äº’é€šä¿¡å—ï¼Ÿ

**ç­”ï¼š** å¯ä»¥ï¼Œä»¥ä¸‹æ˜¯æ¨èçš„æ¨¡å¼ï¼š

**1. äº‹ä»¶é©±åŠ¨é€šä¿¡ï¼š**
```javascript
// å¾®åº”ç”¨ A
const notifyOtherApps = (data) => {
  window.dispatchEvent(new CustomEvent('app-a-event', { detail: data }));
};

// å¾®åº”ç”¨ B
window.addEventListener('app-a-event', (event) => {
  console.log('ä»åº”ç”¨ A æ¥æ”¶åˆ°:', event.detail);
});
```

**2. å…±äº«çŠ¶æ€ç®¡ç†ï¼š**
```javascript
// å…¨å±€å­˜å‚¨
window.__SHARED_STORE__ = {
  user: null,
  subscribers: [],
  updateUser: (user) => {
    window.__SHARED_STORE__.user = user;
    window.__SHARED_STORE__.subscribers.forEach(callback => callback(user));
  }
};
```

**3. æ¥è‡ªä¸»åº”ç”¨çš„å±æ€§ï¼š**
```javascript
// ä¸»åº”ç”¨åè°ƒé€šä¿¡
const handleDataChange = (data) => {
  // æ›´æ–°æ‰€æœ‰ç›¸å…³å¾®åº”ç”¨çš„å±æ€§
  updateMicroAppProps('app-a', { sharedData: data });
  updateMicroAppProps('app-b', { sharedData: data });
};
```

## ğŸ¨ æ ·å¼å’Œ CSS

### é—®ï¼šå¾®åº”ç”¨ä¹‹é—´çš„ CSS æ ·å¼å‘ç”Ÿå†²çªï¼Œå¦‚ä½•ä¿®å¤ï¼Ÿ

**ç­”ï¼š** ä½¿ç”¨ qiankun çš„å†…ç½®æ ·å¼éš”ç¦»ï¼š

**1. ä¸¥æ ¼æ ·å¼éš”ç¦»ï¼ˆShadow DOMï¼‰ï¼š**
```javascript
import { start } from 'qiankun';

start({
  sandbox: {
    strictStyleIsolation: true
  }
});
```

**2. å®éªŒæ€§æ ·å¼éš”ç¦»ï¼ˆCSS ä½œç”¨åŸŸï¼‰ï¼š**
```javascript
start({
  sandbox: {
    experimentalStyleIsolation: true
  }
});
```

**3. æ‰‹åŠ¨ CSS ä½œç”¨åŸŸï¼š**
```css
/* ä¸ºæ‰€æœ‰æ ·å¼æ·»åŠ å‰ç¼€ */
.my-micro-app .button {
  background: blue;
}

.my-micro-app .container {
  padding: 20px;
}
```

æŸ¥çœ‹æˆ‘ä»¬çš„[æ ·å¼éš”ç¦»æŒ‡å—](/cookbook/style-isolation)è·å–å…¨é¢çš„è§£å†³æ–¹æ¡ˆã€‚

### é—®ï¼šæˆ‘å¯ä»¥åœ¨ qiankun ä¸­ä½¿ç”¨ CSS-in-JS åº“å—ï¼Ÿ

**ç­”ï¼š** å½“ç„¶å¯ä»¥ï¼CSS-in-JS åº“ä¸ qiankun é…åˆå¾—å¾ˆå¥½ï¼š

**Styled Componentsï¼š**
```jsx
import styled from 'styled-components';

const Button = styled.button`
  background: blue;
  color: white;
`;
```

**Emotionï¼š**
```jsx
/** @jsxImportSource @emotion/react */
import { css } from '@emotion/react';

const buttonStyle = css`
  background: blue;
  color: white;
`;
```

CSS-in-JS æä¾›å¤©ç„¶éš”ç¦»ï¼Œå› ä¸ºæ ·å¼ä½œç”¨åŸŸé™å®šåœ¨ç»„ä»¶ä¸­ã€‚

## ğŸ”„ è·¯ç”±å’Œå¯¼èˆª

### é—®ï¼šå¦‚ä½•åœ¨å¾®å‰ç«¯è®¾ç½®ä¸­å¤„ç†è·¯ç”±ï¼Ÿ

**ç­”ï¼š** qiankun æ”¯æŒå¤šç§è·¯ç”±ç­–ç•¥ï¼š

**1. åŸºäºè·¯ç”±çš„å¾®åº”ç”¨ï¼ˆæ¨èï¼‰ï¼š**
```javascript
registerMicroApps([
  {
    name: 'user-management',
    entry: '//localhost:8080',
    container: '#container',
    activeRule: '/users' // å½“è·¯ç”±ä»¥ /users å¼€å¤´æ—¶åŠ è½½
  },
  {
    name: 'product-catalog',
    entry: '//localhost:8081', 
    container: '#container',
    activeRule: ['/products', '/categories'] // å¤šä¸ªè·¯ç”±
  }
]);
```

**2. ç¼–ç¨‹å¼è·¯ç”±ï¼š**
```javascript
// åœ¨å¾®åº”ç”¨ä¹‹é—´å¯¼èˆª
import { navigateToUrl } from 'single-spa';

const navigateToUsers = () => {
  navigateToUrl('/users');
};
```

**3. å“ˆå¸Œè·¯ç”±ï¼š**
```javascript
registerMicroApps([
  {
    name: 'hash-app',
    entry: '//localhost:8080',
    container: '#container',
    activeRule: '#/app' // åŸºäºå“ˆå¸Œçš„è·¯ç”±
  }
]);
```

### é—®ï¼šå¾®åº”ç”¨å¯ä»¥æœ‰è‡ªå·±çš„å†…éƒ¨è·¯ç”±å—ï¼Ÿ

**ç­”ï¼š** å¯ä»¥ï¼æ¯ä¸ªå¾®åº”ç”¨éƒ½å¯ä»¥æœ‰è‡ªå·±çš„å†…éƒ¨è·¯ç”±å™¨ï¼š

**React Router ç¤ºä¾‹ï¼š**
```jsx
// åœ¨æ‚¨çš„å¾®åº”ç”¨ä¸­
import { BrowserRouter, Routes, Route } from 'react-router-dom';

function App() {
  const basename = window.__POWERED_BY_QIANKUN__ ? '/users' : '/';
  
  return (
    <BrowserRouter basename={basename}>
      <Routes>
        <Route path="/" element={<UserList />} />
        <Route path="/profile" element={<UserProfile />} />
        <Route path="/settings" element={<UserSettings />} />
      </Routes>
    </BrowserRouter>
  );
}
```

## ğŸš€ æ€§èƒ½

### é—®ï¼šæˆ‘çš„å¾®å‰ç«¯åº”ç”¨åŠ è½½ç¼“æ…¢ï¼Œå¦‚ä½•æé«˜æ€§èƒ½ï¼Ÿ

**ç­”ï¼š** éµå¾ªè¿™äº›ä¼˜åŒ–ç­–ç•¥ï¼š

**1. å¯ç”¨é¢„å–ï¼š**
```javascript
start({
  prefetch: true // æˆ– 'all' æˆ–ç‰¹å®šåº”ç”¨åç§°
});
```

**2. ä½¿ç”¨ä»£ç åˆ†å‰²ï¼š**
```javascript
// å¾®åº”ç”¨ä¸­çš„åŠ¨æ€å¯¼å…¥
const HeavyComponent = React.lazy(() => import('./HeavyComponent'));
```

**3. ä¼˜åŒ–åŒ…å¤§å°ï¼š**
```javascript
// webpack.config.js
module.exports = {
  optimization: {
    splitChunks: {
      chunks: 'all'
    }
  }
};
```

æŸ¥çœ‹æˆ‘ä»¬çš„[æ€§èƒ½ä¼˜åŒ–æŒ‡å—](/cookbook/performance)è·å–è¯¦ç»†ç­–ç•¥ã€‚

### é—®ï¼šå¦‚ä½•é˜²æ­¢å¾®åº”ç”¨ä¸­çš„å†…å­˜æ³„æ¼ï¼Ÿ

**ç­”ï¼š** å®æ–½é€‚å½“çš„æ¸…ç†ï¼š

```javascript
// å¾®åº”ç”¨ç”Ÿå‘½å‘¨æœŸ
export async function unmount() {
  // æ¸…é™¤å®šæ—¶å™¨
  clearInterval(myInterval);
  
  // ç§»é™¤äº‹ä»¶ç›‘å¬å™¨
  window.removeEventListener('resize', handleResize);
  
  // æ¸…ç†è®¢é˜…
  subscription.unsubscribe();
  
  // æ¸…é™¤ç¼“å­˜
  cache.clear();
}
```

## ğŸ› ï¸ å¼€å‘å’Œè°ƒè¯•

### é—®ï¼šå¦‚ä½•åœ¨å¼€å‘ä¸­è°ƒè¯•å¾®åº”ç”¨ï¼Ÿ

**ç­”ï¼š** ä½¿ç”¨è¿™äº›è°ƒè¯•ç­–ç•¥ï¼š

**1. å¯ç”¨æºæ˜ å°„ï¼š**
```javascript
// webpack.config.js
module.exports = {
  devtool: 'source-map'
};
```

**2. ä½¿ç”¨æµè§ˆå™¨å¼€å‘å·¥å…·ï¼š**
- ç½‘ç»œé€‰é¡¹å¡ï¼šæ£€æŸ¥èµ„æºåŠ è½½
- æ§åˆ¶å°ï¼šæŸ¥çœ‹é”™è¯¯æ¶ˆæ¯
- å…ƒç´ ï¼šæ£€æŸ¥ DOM ç»“æ„
- æºç ï¼šä½¿ç”¨æ–­ç‚¹è°ƒè¯• JavaScript

**3. qiankun è°ƒè¯•ï¼š**
```javascript
// å¯ç”¨è¯¦ç»†æ—¥å¿—
localStorage.setItem('qiankun:debug', true);
```

### é—®ï¼šæˆ‘å¯ä»¥åœ¨å¾®åº”ç”¨ä¸­ä½¿ç”¨çƒ­é‡è½½å—ï¼Ÿ

**ç­”ï¼š** å¯ä»¥ï¼Œéœ€è¦ä¸€äº›é…ç½®ï¼š

**å¯¹äº webpack dev serverï¼š**
```javascript
// webpack.config.js
module.exports = {
  devServer: {
    hot: true,
    headers: {
      'Access-Control-Allow-Origin': '*'
    }
  }
};
```

**æ³¨æ„**ï¼šçƒ­é‡è½½åœ¨æ¯ä¸ªå¾®åº”ç”¨å†…å·¥ä½œï¼Œä½†ä¸»åº”ç”¨çš„æ›´æ”¹å¯èƒ½éœ€è¦å®Œå…¨åˆ·æ–°ã€‚

## ğŸ”’ å®‰å…¨

### é—®ï¼šå¦‚ä½•å¤„ç†è·¨å¾®åº”ç”¨çš„èº«ä»½éªŒè¯ï¼Ÿ

**ç­”ï¼š** åœ¨ä¸»åº”ç”¨ä¸­é›†ä¸­èº«ä»½éªŒè¯ï¼š

**1. åŸºäºä»¤ç‰Œçš„èº«ä»½éªŒè¯ï¼š**
```javascript
// ä¸»åº”ç”¨å¤„ç†èº«ä»½éªŒè¯
const userToken = await authenticate(credentials);
localStorage.setItem('token', userToken);

// å°†ä»¤ç‰Œä¼ é€’ç»™å¾®åº”ç”¨
registerMicroApps([{
  name: 'secure-app',
  entry: '//localhost:8080',
  container: '#container',
  activeRule: '/secure',
  props: {
    token: userToken,
    user: currentUser
  }
}]);
```

**2. å…±äº«èº«ä»½éªŒè¯çŠ¶æ€ï¼š**
```javascript
// å…¨å±€èº«ä»½éªŒè¯çŠ¶æ€
window.__AUTH_STATE__ = {
  user: currentUser,
  token: userToken,
  isAuthenticated: true
};
```

### é—®ï¼šå¾®å‰ç«¯æ˜¯å¦å­˜åœ¨å®‰å…¨é—®é¢˜ï¼Ÿ

**ç­”ï¼š** è¯·æ³¨æ„è¿™äº›å®‰å…¨è€ƒè™‘ï¼š

**1. å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰ï¼š**
```html
<meta http-equiv="Content-Security-Policy" 
      content="script-src 'self' https://trusted-cdn.com;">
```

**2. CORS é…ç½®ï¼š**
- åªå…è®¸å—ä¿¡ä»»çš„æ¥æº
- æ­£ç¡®éªŒè¯è¯·æ±‚
- åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨ HTTPS

**3. ä¾èµ–å®‰å…¨ï¼š**
- å®šæœŸå®¡è®¡ä¾èµ–
- ä½¿ç”¨ `npm audit` ç­‰å·¥å…·
- ä¿æŒä¾èµ–æ›´æ–°

## ğŸ“± ç§»åŠ¨ç«¯å’Œæµè§ˆå™¨æ”¯æŒ

### é—®ï¼šqiankun åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šå·¥ä½œå—ï¼Ÿ

**ç­”ï¼š** å¯ä»¥ï¼Œqiankun åœ¨ç§»åŠ¨ç«¯å·¥ä½œï¼Œéœ€è¦è€ƒè™‘ï¼š

**1. è§¦æ‘¸äº‹ä»¶ä¼˜åŒ–ï¼š**
```javascript
// ä½¿ç”¨è¢«åŠ¨ç›‘å¬å™¨
element.addEventListener('touchstart', handler, { passive: true });
```

**2. è§†å£ç®¡ç†ï¼š**
```html
<meta name="viewport" content="width=device-width, initial-scale=1.0">
```

**3. æ€§èƒ½ä¼˜åŒ–ï¼š**
- å‡å°‘åŒ…å¤§å°
- ä½¿ç”¨æ‡’åŠ è½½
- ä¼˜åŒ–å›¾ç‰‡å’Œèµ„æº

### é—®ï¼šqiankun æ”¯æŒå“ªäº›æµè§ˆå™¨ï¼Ÿ

**ç­”ï¼š** qiankun æ”¯æŒç°ä»£æµè§ˆå™¨ï¼š

- **Chrome**ï¼š49+
- **Firefox**ï¼š45+
- **Safari**ï¼š10+
- **Edge**ï¼š79+
- **IE**ï¼šä¸æ”¯æŒ

å¯¹äºè¾ƒæ—§çš„æµè§ˆå™¨ï¼Œè€ƒè™‘ä½¿ç”¨ polyfillï¼š
```html
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
```

## ğŸš¢ éƒ¨ç½²

### é—®ï¼šå¦‚ä½•éƒ¨ç½²å¾®å‰ç«¯åº”ç”¨ï¼Ÿ

**ç­”ï¼š** ä½¿ç”¨ç‹¬ç«‹éƒ¨ç½²ç­–ç•¥ï¼š

**1. åˆ†åˆ«æ„å»ºï¼š**
```bash
# ç‹¬ç«‹æ„å»ºæ¯ä¸ªåº”ç”¨
cd main-app && npm run build
cd micro-app-1 && npm run build  
cd micro-app-2 && npm run build
```

**2. CDN éƒ¨ç½²ï¼š**
```javascript
// ä¸ºæ¯ä¸ªåº”ç”¨é…ç½®ä¸åŒçš„ CDN
const microApps = [
  {
    name: 'app-1',
    entry: 'https://cdn1.example.com/app-1/',
    container: '#container',
    activeRule: '/app-1'
  },
  {
    name: 'app-2', 
    entry: 'https://cdn2.example.com/app-2/',
    container: '#container',
    activeRule: '/app-2'
  }
];
```

### é—®ï¼šå¦‚ä½•å¤„ç†ç‰ˆæœ¬æ§åˆ¶å’Œæ›´æ–°ï¼Ÿ

**ç­”ï¼š** å®æ–½ç‰ˆæœ¬ç®¡ç†ï¼š

**1. è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼š**
```javascript
// æ¯ä¸ªå¾®åº”ç”¨çš„ package.json
{
  "name": "user-management-app",
  "version": "1.2.3"
}
```

**2. è¿è¡Œæ—¶ç‰ˆæœ¬æ£€æŸ¥ï¼š**
```javascript
const requiredVersion = '1.2.0';
const currentVersion = window.__MICRO_APP_VERSION__;

if (!semver.gte(currentVersion, requiredVersion)) {
  console.warn('å¾®åº”ç”¨ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜');
}
```

## ğŸ”— é›†æˆ

### é—®ï¼šæˆ‘å¯ä»¥åœ¨æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ä¸­ä½¿ç”¨ qiankun å—ï¼Ÿ

**ç­”ï¼š** å¾®å‰ç«¯çš„ SSR å¾ˆå¤æ‚ä½†æ˜¯å¯èƒ½çš„ï¼š

**1. é™æ€æ¸²æŸ“ï¼š**
- åœ¨æœåŠ¡å™¨ä¸Šæ¸²æŸ“å¾®åº”ç”¨
- åœ¨å®¢æˆ·ç«¯è¿›è¡Œæ°´åˆ

**2. è€ƒè™‘å› ç´ ï¼š**
- æ¯ä¸ªå¾®åº”ç”¨éƒ½éœ€è¦ SSR æ”¯æŒ
- åº”ç”¨ä¹‹é—´çš„åè°ƒå…·æœ‰æŒ‘æˆ˜æ€§
- æ€§èƒ½å½±å“

**æ›¿ä»£æ–¹æ³•ï¼š**
- ä½¿ç”¨è¾¹ç¼˜ä¾§åŒ…å«ï¼ˆESIï¼‰
- åœ¨é¡µé¢çº§åˆ«å®æ–½å¾®å‰ç«¯
- è€ƒè™‘å®¢æˆ·ç«¯æ¸²æŸ“ä¸å¿«é€Ÿåˆå§‹åŠ è½½

### é—®ï¼šå¦‚ä½•å°† qiankun ä¸ç°æœ‰æ„å»ºå·¥å…·é›†æˆï¼Ÿ

**ç­”ï¼š** qiankun ä¸å„ç§æ„å»ºå·¥å…·é…åˆä½¿ç”¨ï¼š

**Webpackï¼š** ä½¿ç”¨ `@qiankunjs/webpack-plugin`
**Viteï¼š** ä½¿ç”¨ `vite-plugin-qiankun`
**Rollupï¼š** æ‰‹åŠ¨é…ç½®
**Parcelï¼š** æ‰‹åŠ¨é…ç½®

æŸ¥çœ‹æˆ‘ä»¬çš„[ç”Ÿæ€ç³»ç»Ÿ](/ecosystem/)éƒ¨åˆ†äº†è§£ç‰¹å®šé›†æˆã€‚

## ğŸ¤ ç¤¾åŒºå’Œæ”¯æŒ

### é—®ï¼šå¦‚æœæˆ‘é‡åˆ°å›°éš¾ï¼Œåœ¨å“ªé‡Œå¯ä»¥è·å¾—å¸®åŠ©ï¼Ÿ

**ç­”ï¼š** æœ‰å¤šä¸ªæ”¯æŒæ¸ é“å¯ç”¨ï¼š

1. **GitHub Issues**ï¼š[umijs/qiankun](https://github.com/umijs/qiankun/issues)
2. **è®¨è®º**ï¼šGitHub è®¨è®ºç”¨äºæé—®
3. **Stack Overflow**ï¼šç”¨ `qiankun` æ ‡ç­¾æé—®
4. **Discord/Slack**ï¼šç¤¾åŒºèŠå¤©å®¤

### é—®ï¼šæˆ‘å¦‚ä½•ä¸º qiankun åšè´¡çŒ®ï¼Ÿ

**ç­”ï¼š** æˆ‘ä»¬æ¬¢è¿è´¡çŒ®ï¼š

1. **é”™è¯¯æŠ¥å‘Š**ï¼šæäº¤è¯¦ç»†çš„é—®é¢˜æŠ¥å‘Š
2. **åŠŸèƒ½è¯·æ±‚**ï¼šæè®®æ–°åŠŸèƒ½
3. **ä»£ç è´¡çŒ®**ï¼šæäº¤æ‹‰å–è¯·æ±‚
4. **æ–‡æ¡£**ï¼šæ”¹è¿›æ–‡æ¡£å’Œç¤ºä¾‹
5. **ç¤¾åŒº**ï¼šå¸®åŠ©å›ç­”é—®é¢˜

æŸ¥çœ‹æˆ‘ä»¬çš„[è´¡çŒ®æŒ‡å—](https://github.com/umijs/qiankun/blob/master/CONTRIBUTING.md)äº†è§£è¯¦æƒ…ã€‚

---

## ğŸ“š å…¶ä»–èµ„æº

- [å®Œæ•´ API å‚è€ƒ](/api/)
- [æœ€ä½³å®è·µæŒ‡å—](/cookbook/)
- [ç”Ÿæ€ç³»ç»Ÿå·¥å…·](/ecosystem/)
- [GitHub ä»“åº“](https://github.com/umijs/qiankun)
- [ç¤ºä¾‹åº”ç”¨](https://github.com/umijs/qiankun/tree/master/examples)

**æ‰¾ä¸åˆ°æ‚¨è¦æ‰¾çš„å†…å®¹ï¼Ÿ** è¯·[æäº¤é—®é¢˜](https://github.com/umijs/qiankun/issues/new)æˆ–å¼€å§‹[è®¨è®º](https://github.com/umijs/qiankun/discussions) - æˆ‘ä»¬åœ¨è¿™é‡Œå¸®åŠ©æ‚¨ï¼ 